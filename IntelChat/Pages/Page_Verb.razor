@page "/Verb"
@inject NnetDbContext db            // Inject the ServerDbContext service for database access
@inject NavigationManager _nav
@inject IConfiguration _configuration
@* @inject VerbService verbService *@
@layout CustomLayout
@using IntelChat.Models
@using System.Data.SqlClient;
@using System.Data;
@* @using IntelChat.Services; *@


<style>
	body {
		background: url("https://agineuralnet.blob.core.windows.net/background/BG_Verb.png") no-repeat;
		background-size: 1920px 1080px;
		background-position: left 0px top 0px;
		color:antiquewhite;
		background-color: #000000;
		opacity: 70%;
		width: 1920px;
		height: 1080px;
	}

	#img-panel-marque {
		content: url(https://agineuralnet.blob.core.windows.net/panels/Panel_Marque.png);
		position: absolute;
		top: 90px;
		left: 600px;
		width: 580px;
		border-radius: 0px;
		background-size: cover;
	}

	#btn-luster-verb {
		content: url(https://intelchatstorage.blob.core.windows.net/buttonscontainer/Btn_Luster_Verb.png);
		position: absolute;
		top: 85px;
		left: 820px;
		width: 140px;
		border-radius: 8px;
		background-size: cover;
	}

	#img-panel-fluer {
		content: url(https://agineuralnet.blob.core.windows.net/panels/Panel_Fluer.png);
		position: absolute;
		top: 150px;
		left: 1310px;
		width: 188px;
		border-radius: 8px;
		background-size: cover;
	}

	#btn-panel-list {
		left: 10px;
		opacity: 90%;
		background-image: url("https://agineuralnet.blob.core.windows.net/buttons/Button_L.png");
		box-shadow: 0 30px 60px rgba(0,0,0,.5);
	}

		#btn-panel-list:hover {
			box-shadow: 0 5px 10px rgba(0,0,0,.5);
			transform: scale(.85);
		}

	#btn-panel-add {
		background-image: url("https://agineuralnet.blob.core.windows.net/buttons/Button_A.png");
		background-size: cover;
		box-shadow: 0 30px 60px rgba(0,0,0,.5);
		left: 202px;
	}

		#btn-panel-add:hover {
			box-shadow: 0 5px 10px rgba(0,0,0,.5);
			transform: scale(.85);
		}

	#btn-panel-change {
		background-image: url("https://agineuralnet.blob.core.windows.net/buttons/Button_C.png");
		background-size: cover;
		box-shadow: 0 30px 60px rgba(0,0,0,.5);
		left: 394px;
	}

		#btn-panel-change:hover {
			box-shadow: 0 5px 10px rgba(0,0,0,.5);
			transform: scale(.85);
		}

	#btn-panel-delete {
		background-image: url("https://agineuralnet.blob.core.windows.net/buttons/Button_D.png");
		background-size: cover;
		box-shadow: 0 30px 60px rgba(0,0,0,.5);
		top: 110px;
		left: 1000px;
		opacity: 100%;
	}

		#btn-panel-delete:hover {
			box-shadow: 0 5px 10px rgba(0,0,0,.5);
			transform: scale(.85);
		}

	#img-panel-shadow-black {
		border-radius: 12px;
		background-size: cover;
	}

	/*********** Common Styles for Input Boxes ***************/
	.FilterInput {
		width: 116px;
		padding: 10px;
		font-size: 16px;
		border: 1px solid #ccc;
		border-radius: 8px; /* Rounded edges */
		box-sizing: border-box; /* Ensures consistent dimensions including padding and borders */
	}

	/*********** Positioning for Tag Filter ***************/
	.TagFilter {
		position: absolute;
		top: 430px; /* Adjust this to place it above DirectSelect */
		right: 600px;
	}

	/*********** Positioning for Direct Select ***************/
	.DirectSelect {
		position: absolute;
		top: 360px; /* Positioned below TagFilter */
		right: 600px;
	}
</style>

<div class="verb-page">
	<!-- ************************************************************************************ -->
	<!-- *************************** Lock onto a Person and a POD *************************** -->
	<!-- ************************************************************************************ -->

	<p style="color:grey;font-size:32px">Pod: @pod</p>
	<p style="color:grey;font-size:32px;top:48px;position:absolute">Pid: @pid</p>
	<!-- ************************************************************************************ -->
	<!-- ******************************** DISPLAY PANELS ************************************ -->
	<!-- ************************************************************************************ -->
	<div><img id="img-panel-marque"></div>
	<div><img id="btn-luster-verb"></div>
	<div><img id="img-panel-fluer"></div>

	<!-- ************************************************************************************ -->
	<!-- *********************** DISPLAY PANEL CRUD BUTTONS ********* EXIT ****************** -->
	<!-- ************************************************************************************ -->

	<div class="boxButton">
		<button id="btn-panel-list" @onclick="@(() => show = "list")"></button>
		<button id="btn-panel-add" @onclick="@(() => show = "add")"></button>
		<button id="btn-panel-change" @onclick="@(() => show = "change")"></button>
		<button id="btn-panel-delete" @onclick="@(() => show = "delete")"></button>
	</div>

	<button class="general-menu-button" @onclick="@(()=>_nav.NavigateTo("/?pod="+pod+"&pid="+pid))"
			style="position:absolute;top:900px;left:10px;height:80px;width:180px;border:0px;">
		EXIT
	</button>

	<!-- ************************************************************************************ -->
	<!-- *********************************** DIRECT SELECT ID ******************************* -->
	<!-- ************************************************************************************ -->
	<div class="DirectSelect">
		<input id="directSelectId" class="FilterInput" type="text" @bind="directSelectId" @onkeypress="HandleDirectSelectKeyPress" placeholder="Enter ID" />
	</div>

	<!-- ************************************************************************************ -->
	<!-- *********************************** TAG FILTERING ********************************** -->
	<!-- ************************************************************************************ -->
	<div class="TagFilter">
		<input id="tagFilter" class="FilterInput" @bind="tagFilter" @oninput="ApplyTagFilter" placeholder="Enter Tag" />
	</div>

	<!-- ************************************************************************************ -->
	<!-- *************************************  VERB LIST  ********************************** -->
	<!-- ************************************************************************************ -->
	@if (show == "list")
	{
		<button class="general-menu-button" style="position:absolute;height:80px;width:180px;left:10px;top:800px;border:0px;" @onclick="@(()=>_nav.NavigateTo("/Grid?pod="+pod+"&pid="+pid+"&entity="+pageName))">GRID</button>

		<div class="ShadowText">
			<img id="img-panel-shadow-black" src="https://agineuralnet.blob.core.windows.net/panels/Panel_Shadow.png">
		</div>

		<div class="exhibitPanel" style="overflow-y:scroll;height:630px;text-overflow:ellipsis;overflow-x:scroll;">
			<div class="ListFilter">
				<label>
					<select value="@filter["list"]" @onchange="@(e => filter["list"] = e.Value.ToString())">
						<option value="****">****</option>
						@foreach (var pype in pypes)
						{
							if (pype.PypeId == "COOK")
							{
								<option value="@pype.PypeType">@pype.PypeType</option>
							}
						}
					</select>
				</label>
			</div>

			<table id="listTable">
				@*A "table" (really a list) of all records of the same type as selected table crud value*@
				<tr>
					<th>POD ID# Status Type Label Description</th>
				</tr>
				@foreach (var verb in entities)
				{   // Loop through each label of the currently selected table
					@if (filter["list"] == "****" || verb.VerbType == filter["list"])
					{
						<tr>
							<td @onclick="@(() => _nav.NavigateTo("/VerbDetails?pod="+pod+"&pid="+pid+"&id="+@verb.VerbId+"&prevPage=/Verb"))" onmouseover="this.style.color='#AAAAAA'" onMouseOut="this.style.color='#FFFFFF'">
								@verb.PodIdFk     @verb.VerbId     @verb.VerbStatus     @verb.VerbType  @verb.VerbLabel @verb.VerbDescription
							</td>
						</tr>
					}
					// Display only the goal's description
				}
			</table>
		</div>
	}

	<!-- ************************************************************************************ -->
	<!-- ************************************* VERB CREATE ********************************** -->
	<!-- ************************************************************************************ -->
	@if (show == "add")
	{
		<br>
		<div style="font-size:x-large; ">
			<form @onsubmit="OnCreate">

				<div class="ShadowText">
					<img src="https://agineuralnet.blob.core.windows.net/panels/Panel_Shadow.png"
						 style="border-radius: 12px;background-size: cover;">
				</div>

				<div class="boxFilter">
					<img src="https://agineuralnet.blob.core.windows.net/panels/Panel_Commit.png"
						 style="border-radius: 12px;background-size: cover;">
					<button class="commitCreate" type="submit"></button>
				</div>

				<div class="exhibitInfo">

					<label>
						Verb Label 16:
						<input class="form-control" @bind="@entity["add"].VerbLabel" maxlength="16" required />
					</label><br><br>

					<label>
						Description:
						<input class="form-control" @bind="@entity["add"].VerbDescription" maxlength="255" required />
					</label><br><br>
					<label>
						Type
						<select @bind="@entity["add"].VerbType">
							<option value="">****</option>
							@foreach (var pype in pypes)
							{
								if (pype.PypeId == "COOK")
								{
									<option value="@pype.PypeType">@pype.PypeType</option>
								}
							}
						</select>
					</label><br><br>

					<label>
						Status:
						<input class="form-control" @bind="@entity["add"].VerbStatus" maxlength="1" required />
					</label><br><br>
				</div>
			</form>
		</div>
	}

	<!-- ************************************************************************************ -->
	<!-- ************************************* VERB CHANGE ********************************** -->
	<!-- ************************************************************************************ -->
	@if (show.Equals("change"))
	{
		<div style="font-size:x-large; display: inline-block;">
			<form @onsubmit="OnChange">
				@**@

				<div class="ShadowText">
					<img src="https://agineuralnet.blob.core.windows.net/panels/Panel_Shadow.png"
						 style="border-radius: 12px;background-size: cover;">
				</div>


				<div class="boxFilter">

					<div class="PypeTypeFilter">
						<label>
							<select value="@filter["change"]" @onchange="@(e => OnChangeFilterChanged(e, "change"))">
								<option value="****">****</option>
								@foreach (var pype in pypes)
								{
									if (pype.PypeId == "COOK")
									{
										<option value="@pype.PypeType">@pype.PypeType</option>
									}
								}
							</select>
						</label>
					</div>

					<div class="PypeType">
						<label>
							<select class="form-control" value="@entity["change"].VerbId" @onchange="@(e => { var id = Int32.Parse(e.Value.ToString()); AutoFill(id, "change"); })">
								@foreach (var verb in (filter["change"] == "****") ? entities : entities.Where(verb => verb.VerbType == filter["change"]))
								{
									<option value="@verb.VerbId"> @verb.VerbLabel</option>
								}
							</select>
						</label>
					</div>

					<img src="https://agineuralnet.blob.core.windows.net/panels/Panel_Commit.png"
						 style="border-radius: 12px;background-size: cover;">
					<button class="commitChange" type="submit"></button>
				</div>

				<div class="exhibitInfo">

					<label>
						label:
						<input class="form-control" @bind="@entity["change"].VerbLabel" maxlength="16" required />
					</label><br><br>

					<label>
						description:
						<input class="form-control" @bind="@entity["change"].VerbDescription" maxlength="255" required />
					</label><br><br>

					<label>

						type:
						<select @bind="@entity["change"].VerbType" required>
							@foreach (var pype in pypes)
							{
								if (pype.PypeId == "COOK")
								{
									<option value="@pype.PypeType">@pype.PypeType</option>
								}
							}
						</select>
					</label><br><br>

					<label>
						status:
						<input class="form-control" @bind="@entity["change"].VerbStatus" maxlength="1" required />
					</label><br><br>

					<label>
						image:
						<input class="form-control" @bind="@entity["change"].UrlIdPk" type="number" required />
					</label><br><br>
				</div>

			</form>
		</div>

	}

	<!-- ************************************************************************************ -->
	<!-- ************************************* VERB DELETE ********************************** -->
	<!-- ************************************************************************************ -->
	@if (show.Equals("delete"))
	{
		<div style="font-size:x-large; display: inline-block;">
			<form @onsubmit="OnDelete">

				<div class="ShadowText">
					<img src="https://agineuralnet.blob.core.windows.net/panels/Panel_Shadow.png"
						 style="border-radius: 12px;background-size: cover;">
				</div>

				<div class="boxFilter">

					<div class="PypeTypeFilter">
						<label>
							<select value="@filter["delete"]" @onchange="@(e => OnChangeFilterChanged(e, "delete", "D"))">
								<option value="****">****</option>
								@foreach (var pype in pypes)
								{
									if (pype.PypeId == "COOK")
									{
										<option value="@pype.PypeType">@pype.PypeType</option>
									}
								}
							</select>
						</label>
					</div>

					<div class="PypeType">
						<label>
							<select class="form-control" value="@entity["delete"].VerbId" @onchange="@(e => { var id = Int32.Parse(e.Value.ToString()); AutoFill(id, "delete"); })">
								@foreach (var verb in (filter["delete"] == "****") ? entities : entities.Where(verb => verb.VerbType == filter["delete"]))
								{
									if (verb.VerbStatus == "D")
									{
										<option value="@verb.VerbId"> @verb.VerbLabel</option>
									}
								}
							</select>
						</label>
					</div>

					<img src="https://agineuralnet.blob.core.windows.net/panels/Panel_Commit.png"
						 style="border-radius: 12px;background-size: cover;">
					<button class="commitDelete" type="submit"></button>
				</div>
				<div class="exhibitInfo">
					Only if the Status = D
				</div>
			</form>
		</div>
	}

</div>



