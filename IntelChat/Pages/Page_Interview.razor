@page "/Interview"
@inject NnetDbContext db            // Inject the ServerDbContext service for database access
@inject NavigationManager _nav
@inject IConfiguration _config
@layout CustomLayout
@using IntelChat.Models
@using System.Data.SqlClient;
@using System.Data;

<!-- ************************************************************************************ -->
<!-- ********************************* DISPLAY POD# and PID# **************************** -->
<!-- ************************************************************************************ -->
<p style="position:absolute;top:030px;left:20px;font-size:22px;opacity:20%;color:aquamarine">POD: @pod</p>
<p style="position:absolute;top:060px;left:20px;font-size:22px;opacity:20%;color:aquamarine">PID: @pid</p>

<style>
	body {
		background: url("https://agineuralnet.blob.core.windows.net/background/BG_Interview.png") no-repeat;
		background-size: 1920px 1080px;
		background-position: left 0px top 0px;
		opacity: 100%;
		min-height: 100vh;
		width: 100%;
		color: blanchedalmond;
		background-color: antiquewhite
	}

	boxquestion {
		padding: 0;
        margin: 0;
        position: absolute;
        top:  20px;
        left: 430px;
		width:  870px;
		height: 260px;
        font-size: 42px;
		text-align: center;
		background-size: cover;
	}

	boxdirection {
		padding: 0;
		margin: 0;
		width: 470px;
		height: 478px;
		text-align: right;
		top: 282px;
		left: 354px;
		position: absolute;
		opacity:80%;
	}

	boxmagnitude {
		padding: 0;
		margin: 0;
		width: 470px;
		height: 478px;
		text-align: right;
		top: 282px;
		left: 874px;
		position: absolute;
		opacity: 80%;
	}

	cast-a-panel {
		width: 470px;
		height: 478px;
		text-align: right;
		background-size: cover;
		background-color: seashell;
		opacity: 50%;
	}


	.interview-page button {
		border-radius: 18px;
		opacity: 50%;
		position: absolute;
		border: 0px;
		color:crimson
	}

	#menu {
		display: block;
		position: absolute;
		top: 0;
		right: 0;
		position: fixed;
		width: 33.333%;
		height: 100%;
		background-color: white;
		margin: 0;
		padding: 15px;
		box-sizing: border-box;
		border-left: 5px solid #000000;
		overflow-y: auto;
	}

	#info {
		display: block;
		position: absolute;
		bottom: 0;
		left: 0;
		position: fixed;
		width: 66.666%;
		height: 33%;
		background-color: white;
		margin: 0;
		padding: 15px;
		box-sizing: border-box;
		border-top: 5px solid #000000;
		border-right: 5px solid #000000;
		overflow-y: auto;
	}

	.boxquestion textarea {
		width: 100%;
		height: 90px;
		margin-top: 12px;
		background: transparent;
		border: 0;
		resize: none;

		overflow: auto;
		padding: 0;
		text-align: center;
	}

	#modal {
		background: url("https://intelchatstorage.blob.core.windows.net/bgcontainer/background-modal_blue.png") no-repeat;
		background-size: 1870px 1030px;
		position: absolute;
		width: 1870px;
		height: 1030px;
		left: 25px;
		top: 25px;
		border: 5px solid #000000;
		background-color: #FFFFFF;
		box-sizing: border-box;
		padding: 25px;
	}

	#modal-content {
		background-color: #8ba3de;
		width: 50%;
		margin: 0 auto;
		border: 5px solid #4a5674;
		border-radius: 10px;
		box-sizing: border-box;
		padding: 25px;
	}

	#hide-modal {
		font-size: 50px;
		font-weight: bolder;
		color: #000000;
		float: right;
		cursor: pointer
	}

		#hide-modal:hover {
			color: #555555;
		}
	
	.modal-btn {
		width: 100%;
	}
</style>

	@if (modal)
	{
		<div id="modal">
			<p id="hide-modal" @onclick=HideModal>X</p>
			<div id="modal-content">
				@if (show == "chat")
				{
					<div style="z-index:1">
						<Chat></Chat>
					</div>
				}
				@if (show == "memo")
				{
					<div style="z-index:1">
						<Inbox></Inbox>
					</div>
				}
				@if (show == "info")
				{
					<embed src="https://intelchatstorage.blob.core.windows.net/documents/TestPDF.pdf" type="application/pdf" width='800' height='800' style="position: absolute; top: 10px; left: 10px">
					<button class="modal-btn" @onclick=HideModal style="position: absolute; width: 100px; height: 50px; color: black; background-color: white; top: 40px; left: 30px; z-index: 10000;">Close PDF</button>
				}
			</div>
		</div>
	}
	else
	{
		<button @onclick="Process"
				class="general-interview-button"
				style="color:red;width:160px;height:50px;top:400px;left:34px;">
			PROCESS
		</button>

		<div class="interview-page">
			@*
			***********************************************************************************
			*******************************  Question Next-Prev EXIT **** boxquestion *********
			***********************************************************************************
			*@

			<boxquestion>
				<div class="boxquestion">

					<textarea style="font-size:32px; line-height: 1.3; " 
					     readonly>@if (questions.Count > 0)	  @questions[current].QuestionText	  </textarea>

					<div style="position:absolute;top:134px;left:280px;font-size:24px">@dispResponse   </div>

					<div style="position:absolute;top:198px;left:280px;font-size:24px">@dispSeverity   </div>
					
				</div>
			</boxquestion>


			<menu>
				<button @onclick="Exit"
				class="menu-button" style="width:160px;height:70px;top:50px;left:20px;">
					&nbsp;
				</button>

				<button @onclick="GoToPreviousQuestion"
				class="menu-button" style="left:400px;top:150px;height:90px;width:170px;opacity:0%">
					&nbsp;
				</button>

				<button @onclick="GoToNextQuestion"
						class="menu-button" style="left:1130px;top:150px;height:90px;width:170px;opacity:0%">
					&nbsp;
				</button>
			</menu>


			<boxdirection>
			<!-- ************************************************************************************ -->
			<!-- *************************** BOX Response DIRECTION 1-5  **************************** -->
			<!-- ************************************************************************************ -->

				<div class="boxdirection">
					<button @onclick="(() => ChangeResponse(1))"
					class="@((response == 1) ? "response-button selected" : "response-button")"
					style="top:6px;left:50px;width:306px;height:80px">
						&nbsp;
					</button>

					<button @onclick="(() => ChangeResponse(2))"
					class="@((response == 2) ? "response-button selected" : "response-button")"
					style="top:111px;left:50px;width:306px;height:80px">
						&nbsp;
					</button>

					<button @onclick="(() => ChangeResponse(3))"
					class="@((response == 3) ? "response-button selected" : "response-button")"
					style="width:408px;height:74px;top: 232px;left:0px;">
						&nbsp;
					</button>

					<button @onclick="(() => ChangeResponse(4))"
					class="@((response == 4) ? "response-button selected" : "response-button")"
							style="width:400px;height:74px;top: 312px;left:0px;">
						&nbsp;
					</button>

					<button @onclick="(() => ChangeResponse(5))"
					class="@((response == 5) ? "response-button selected" : "response-button")"
							style="width:400px;height:74px;top: 394px;left:0px;">
						&nbsp;
					</button>
				</div>
			</boxdirection>


			<boxmagnitude>
				<!-- ************************************************************************************ -->
				<!-- *************************** BOX Response  SEVERITY 1-7  **************************** -->
				<!-- ************************************************************************************ -->

				<div class="boxmagnitude">
					<button @onclick="(() => ChangeSeverity(7))"
					class="@((severity == 7) ? "severity-button selected" : "severity-button")"
					style="top: 00px;left:120px;width:340px;height:60px">
						&nbsp;
					</button>

					<button @onclick="(() => ChangeSeverity(6))"
					class="@((severity == 6) ? "severity-button selected" : "severity-button")"
					style="top:071px;left:80px;width:340px;height:60px">

						&nbsp;
					</button>

					<button @onclick="(() => ChangeSeverity(5))"
							class="@((severity == 5) ? "severity-button selected" : "severity-button")"
							style="top:138px;left:039px;width:340px;height:60px">
						&nbsp;
					</button>

					<button @onclick="(() => ChangeSeverity(4))"
							class="@((severity == 4) ? "severity-button selected" : "severity-button")"
							style="top:206px;left:000px;width:340px;height:60px">
						&nbsp;
					</button>

					<button @onclick="(() => ChangeSeverity(3))"
							class="@((severity == 3) ? "severity-button selected" : "severity-button")"
							style="top:272px;left:039px;width:340px;height:60px">
						&nbsp;
					</button>

					<button @onclick="(() => ChangeSeverity(2))"
							class="@((severity == 2) ? "severity-button selected" : "severity-button")"
							style="top:341px;left:080px;width:340px;height:60px">
						&nbsp;
					</button>

					<button @onclick="(() => ChangeSeverity(1))"
					class="@((severity == 1) ? "severity-button selected" : "severity-button")"
					style="top: 412px;left:120px;width:340px;height:60px">
						&nbsp;
					</button>
				</div>
			</boxmagnitude>
		</div>


		<!-- ************************************************************************************ -->
		<!-- *************************** MODAL options Buttons  ********************************* -->
		<!-- ************************************************************************************ -->
		<button class="general-interview-button" @onclick=ShowMemo style="width:160px;height:75px;top:500px;left:34px;color:antiquewhite">Memo</button>
		<button class="general-interview-button" @onclick=ShowChat style="width:160px;height:75px;top:600px;left:34px;color:antiquewhite">Chat</button>
		<button class="general-interview-button" @onclick=ShowInfo style="width:160px;height:75px;top:700px;left:34px;color:antiquewhite">.pdf</button>

		<button class="general-interview-button" @onclick="NavigateToLascaux" style="width:160px;height:75px;top:800px;left:34px;color:antiquewhite">Lascaux</button>
	}



	<!-- ************************************************************************************ -->
	<!-- ************************************* HELP Overlay ********************************* -->
	<!-- ************************************************************************************ -->
	@if (showIframe)
	{
		<div>
			<iframe src="@imagePath" width="1400" height="920" frameborder="0"
					style="position:absolute; top:0px;left:0px;width:1400px; height:800px; opacity:60%;">
			</iframe>
			<br />
			<button class="btn btn-danger" @onclick="CloseIframe"
					style="position:absolute; top:360px;left:20px; opacity:70%; color:black">
				Close Image
			</button>
		</div>
	}
	else
	{
		<button class="btn btn-primary" @onclick="OpenIframe"
				style="position:absolute; top:360px;left:20px; opacity:70%; color:black">
			Show Image
		</button>
	}
	@code {
		private bool showIframe = false;
		private string imagePath = "https://agineuralnet.blob.core.windows.net/background/BG_Interview_help.png"; // Replace with your .png file path

		private void OpenIframe()
		{ showIframe = true; }

		private void CloseIframe()
		{ showIframe = false; }
	}
	<!-- *************************** End of HELP Overlay ******************************** -->

